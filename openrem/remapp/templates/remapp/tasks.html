<table class="table sortable" id="{{ type }}">
  <tr>
    <th id="uuid_{{ type }}" onclick="updateSort(this.id, 'user_click');" style="width: 15%">UUID</th>
    <th id="task_{{ type }}" onclick="updateSort(this.id, 'user_click');" style="width: 19%">Task type</th>
    <th id="result_{{ type }}" onclick="updateSort(this.id, 'user_click');" style="width: 15%">Message</th>
    <th id="started_{{ type }}" onclick="updateSort(this.id, 'user_click');" style="width: 13%">Started</th>
    <th id="state_{{ type }}" onclick="updateSort(this.id, 'user_click');">State</th>
    {% if type == 'active' %} 
      <th id="abort">Abort Task</th>
    {% endif %}
  </tr>
  {% for task in tasks %}
    <tr>
      <td>{{ task.uuid }}</td>
      <td>{{ task.task_type|safe }}</td>
      <td>{{ task.status|safe }}</td>
      <td>{{ task.started_at }}</td> <!--sortable_customkey="{{timedelta}}"-->
      {% if task.complete %} 
        {% if task.completed_successfull %} 
          <td>Success</td>
        {% else %} 
          <td>Failure</td>
        {% endif %} 
      {% else %} 
        <td>Running</td>
      {% endif %}
      {% if type == 'active' %} 
        <td>
          <a class="btn btn-danger" href="{% url 'abort_task' task_id=task.uuid %}" role="button">
            Terminate task
          </a>
        </td>
      {% endif %}
    </tr>
  {% endfor %}
</table>

<script>
    $(document).ready(function () {
        document.getElementById("{{ type }}")
        var taskTable{{ type }} = document.getElementById("{{ type }}");
        sorttable.makeSortable(taskTable{{ type }});
        updateSort(sort_info_{{ type }}.heading);
    });
</script>


